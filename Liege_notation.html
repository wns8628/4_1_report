<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <h3>후위표기법 과제 12120084 김세준</h3>

    <input id="inputid"type="text" name="" value="" placeholder="식을 적어주세요 예) 1+2*3">
    <input type="button" name="" value="확인" onclick="Liege_notation()">
    </br>
    </br>
    <p id="demo">결과값 : </p>

    <script type="text/javascript">

      function Stack(capacity){
          this.capacity = capacity+1;
          this.buffer = new Array(this.capacity);
          this.topIndex = -1;
      };
      Stack.prototype.push = function(obj){
              this.topIndex++;
              this.buffer[this.topIndex] = obj;
              return true;
          return false;
      };
      Stack.prototype.pop = function(){
              ret = this.buffer[this.topIndex];
              this.buffer[this.topIndex] = undefined;
              this.topIndex--;
              return ret;
          return null;
      };

    function Liege_notation()
    {
      var stack = new Stack(8);
      var input = document.getElementById("inputid").value;
      var put = new Array(3);
      put = input.split(""); //입력요소분리

    	var i = 0;
    	var top = -1;
    	var temp;


    	for ( i ; i < put.length ; i++){
    		if (put[i] == '+' || put[i] == '-' || put[i] == '*' || put[i] == '/'){
    			switch (put[i]){
    			case '+': case '-':
    			{
    				if (top == -1){
    					stack.push(put[i]);
    					top++;
    					break;
    				}
    				while (top != -1){
    					var temp = stack.pop();
    					top--;
    					document.getElementById("demo").innerHTML += temp;
    				}
    				stack.push(put[i]);
    				top++;
    				break;
    			}
    			case '*': case '/':
    			{
    				if (top == -1){
    					stack.push(put[i]);
    					top++;
    					break;
    				}
    				var temp = stack.pop();
    				top--;
    				if ((temp == '*') || (temp == '/')){
    					document.getElementById("demo").innerHTML +=  temp ;
    				}
    				else{
    					stack.push( temp );
    					top++;
    				}
    				stack.push( put[i] );
    				top++;
    				break;
    			}
    			}
    		}
    		else
    		 document.getElementById("demo").innerHTML +=  put[i] ;
    	}
    	for (var i = 0; i <= top; i++ ){
        document.getElementById("demo").innerHTML +=  stack.pop();
    	}
    }


// exp[] 는 후위 표기법으로 된 수식
function calcul(){
    var op1, op2, value, i;
    var exp = new Array('1','2','3','*','+');
    var len = new Array( '10', '+' , '2', '*' , '5');
    var ch;

    // StackType s;
    var s = new Stack(5);
    // init(&s);
    for (i = 0; i < len.length; i++) {
        ch = exp[i];
        // ch가 피연산자일 경우. char형태의 값으로 들어오기 때문에 char '0' = 48을 가짐.
        // 실제 숫자값으로 변경하기 위해 - '0'을 해준다.
        if (ch != '+' && ch != '-' && ch != '*' && ch != '/'){
            value = ch - '0';
            s.push(value);
            continue ;
          }

        op2 = s.pop();
        op1 = s.pop();

        switch (ch) {
            case '+': value = op1 + op2; break;
            case '-': value = op1 - op2; break;
            case '*': value = op1 * op2; break;
            case '/': value = op1 / op2; break;
            default: exit(1); break;
        }
        s.push(value);
    }
    return s.pop();
}
//

    var a = eval();

    document.write(a);

    </script>
  </body>
</html>
